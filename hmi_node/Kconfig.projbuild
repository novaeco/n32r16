menu "HMI Node Options"
    config HMI_SENSOR_HOSTNAME
        string "Sensor fallback hostname"
        default "sensor-node.local"
    config HMI_ALLOW_PLACEHOLDER_SECRETS
        bool "Allow building with placeholder security material"
        default n
        help
            Enable this option only for development images where placeholder
            bearer tokens, provisioning POPs, and OTA manifest URLs remain.
            Production builds must disable it and provide unique credentials;
            compile-time assertions in app_main.c enforce the policy.

    config HMI_SENSOR_PORT
        int "Sensor WebSocket port"
        range 80 65535
        default 8080
    config HMI_DISCOVERY_TIMEOUT_MS
        int "mDNS discovery timeout before fallback (ms)"
        range 1000 60000
        default 12000
        help
            Defines the maximum time the HMI node waits for `_hmi-sensor._tcp`
            responses before falling back to the static hostname configured in
            `CONFIG_HMI_SENSOR_HOSTNAME`. Set to 0 to disable the timeout and
            rely solely on discovery retries.
    config HMI_DISCOVERY_CACHE_TTL_MINUTES
        int "mDNS discovery cache TTL (minutes)"
        range 1 1440
        default 120
        help
            Controls how long the cached endpoint from secure NVS is considered
            valid when discovery responses are unavailable. Once expired the HMI
            forces a fresh lookup before attempting connections.
    config HMI_WS_AUTH_TOKEN
        string "WebSocket bearer token"
        default "replace-me"
    config HMI_WS_ENABLE_ENCRYPTION
        bool "Encrypt WebSocket frames with AES-GCM"
        default n
    config HMI_WS_ENABLE_HANDSHAKE
        bool "Include HMAC handshake headers"
        default n
    config HMI_WS_CRYPTO_SECRET_BASE64
        string "WebSocket shared secret (Base64)"
        default ""
    config HMI_WS_TLS_SNI_OVERRIDE
        string "TLS server name override"
        default ""
        help
            When connecting to the sensor node over TLS the HMI advertises this
            value as Server Name Indication (SNI) and validates it against the
            certificate SubjectAltName. Leave empty to use the hostname returned
            by mDNS, the cached discovery metadata, or `CONFIG_HMI_SENSOR_HOSTNAME`.
    config HMI_PROV_SERVICE_NAME
        string "Provisioning service name suffix"
        default "HMI"
    config HMI_PROV_POP
        string "Provisioning proof-of-possession"
        default "hmi-pop"
    config HMI_PROV_SEC2_USERNAME
        string "Provisioning SRP username"
        default "wifiprov"
    config HMI_PROV_SEC2_SALT_BASE64
        string "Provisioning SRP salt (Base64)"
        default "A27gx7y57ahMnqyX2T3s9A=="
    config HMI_PROV_SEC2_VERIFIER_BASE64
        string "Provisioning SRP verifier (Base64)"
        default "fHyFR2UIlG3WNq831+iRQ3jP/WFsWdL4OQgScjjeniSkcCYc36kDwrJw57EyJNoRHZcY3GByCMyayQxIJ+KuiaoWJbgE0hqbOo839uQ6cS7hJ4Zurc4o/1RGYB+5lofcV0Cn1GzJd1TcFoLw7TVqxHCtPZC1gZRw17xlstUY4C7Dpflo3WR7uLc8nPwA2HF+t5p8sbfCwxg0KTJDPgCZ6YKU49gqsJYpt98OXwgzQHZSkTIAn5csiWw5HsgoBUQXP2gCip9EYdH1oX5acNLHI4HLOGjkLCC8QFd2F70IuJa8JusyRmk1BYwVcNkb6b7MqTimZ/CtUBMZcmS/UsI04hsReXRyvTRbseL9ZnP+cWR00E68USQZQIcOkkDmIectTjd2Ly7iaMeJ6DITQgaEhFNKswwbTI0cUZcZq653/9vs8BCVNDNryz6ED7nYX7iguFVTPnD3GPXOe06/J87OqLO+QMXFMik+cWSe3oz2daHm9lPIMah43lBA92LeNrK6"
    config HMI_PROV_TIMEOUT_MS
        int "Provisioning completion timeout (ms)"
        range 1000 600000
        default 180000
    config HMI_PROV_CONNECT_TIMEOUT_MS
        int "Wi-Fi connect attempt timeout (ms)"
        range 1000 120000
        default 20000
    config HMI_PROV_MAX_ATTEMPTS
        int "Maximum Wi-Fi connect attempts before failing"
        range 1 20
        default 5
    config HMI_PROV_PREFER_BLE
        bool "Préférer le schéma de provisioning BLE"
        default n
        help
            Active la tentative de provisioning via BLE (ESP BLE Provisioning).
            Si le contrôleur BLE n'est pas disponible ou échoue à
            s'initialiser, le provisioning SoftAP est utilisé en repli.
    config HMI_OTA_URL
        string "HTTPS OTA manifest URL"
        default "https://example.com/hmi/ota.json"
    config USE_CBOR
        bool "Enable CBOR payloads"
        default n
    config HMI_ENABLE_GCOV
        bool "Enable gcov instrumentation for unit tests"
        default n
        help
            Selecting this option appends "-fprofile-arcs -ftest-coverage" to the
            compilation and linking flags for the HMI node component. Enable it in
            CI or dedicated coverage builds before executing `idf.py -T` to
            generate `.gcda` files consumable by tools/run_coverage.py.
endmenu
